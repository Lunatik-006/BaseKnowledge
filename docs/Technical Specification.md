# Technical Specification ‚Üí TODO (v2.1)

–ù–∏–∂–µ ‚Äî –ø–µ—Ä–µ—á–µ–Ω—å –∑–∞–¥–∞—á/—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–æ –æ–±–ª–∞—Å—Ç—è–º —Å –æ—Ç–º–µ—Ç–∫–æ–π —Å—Ç–∞—Ç—É—Å–∞ –∏ –∫—Ä–∞—Ç–∫–∏–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –ø–æ —Ç–µ–∫—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

# Technical Specification ‚Üí TODO (v1.1)

–ù–∏–∂–µ ‚Äî –ø–µ—Ä–µ—á–µ–Ω—å –∑–∞–¥–∞—á/—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–æ –æ–±–ª–∞—Å—Ç—è–º —Å –æ—Ç–º–µ—Ç–∫–æ–π —Å—Ç–∞—Ç—É—Å–∞ –∏ –∫—Ä–∞—Ç–∫–∏–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –ø–æ —Ç–µ–∫—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

## 0) –¶–µ–ª–∏
- [x] –ü—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã ‚Üí Obsidian-–∑–∞–º–µ—Ç–∫–∏ —Å –∞–≤—Ç–æ—Å—Å—ã–ª–∫–∞–º–∏ –∏ MOC. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–∞–π–ø–ª–∞–π–Ω–æ–º IngestText + LLM (libs/usecases/ingest_text.py, libs/llm/*).
- [x] –ü–æ–∏—Å–∫ (RAG) —Å LLM-–æ—Ç–≤–µ—Ç–æ–º. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (libs/usecases/search.py, libs/rag/vector_index.py).
- [x] –ù–∏–∑–∫–æ–µ —Ç—Ä–µ–Ω–∏–µ: –±–æ—Ç, Mini App, ZIP. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –µ—Å—Ç—å –±–æ—Ç (apps/bot), Mini App (apps/miniapp), —ç–∫—Å–ø–æ—Ä—Ç /export/zip.

## 1) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å–µ—Ä–≤–∏—Å—ã
- [x] FastAPI-—Å–µ—Ä–≤–∏—Å (api). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã ingest/search/notes/export/webhook/health –≤ apps/api/main.py.
- [x] Mini App (Next.js). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–ø–∏—Å–æ–∫/–ø—Ä–æ—Å–º–æ—Ç—Ä/–ø–æ–∏—Å–∫, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API —á–µ—Ä–µ–∑ /api (apps/miniapp).
- [x] Telegram Bot. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: polling, —Ä–µ–∂–∏–º—ã One-to-One/Curate, –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è, —Å—Å—ã–ª–∫–∏ (apps/bot/main.py).
- [x] PostgreSQL. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —á–µ—Ä–µ–∑ SQLAlchemy (libs/db/*).
- [x] Milvus (vector store). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: libs/rag/vector_index.py, —Å–æ–∑–¥–∞–Ω–∏–µ/–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ chunks.
- [ ] –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π worker/–æ—á–µ—Ä–µ–¥—å. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –≤—Å—ë —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ API/–±–æ—Ç–µ.
- [ ] **W1:** –î–æ–±–∞–≤–∏—Ç—å use-case `build_course` (libs/usecases/build_course.py): –≤—Ö–æ–¥ ‚Äî `user_id`, –æ–ø—Ü. `note_ids`, `target_level` {beginner|intermediate|advanced}, `tone` {pragmatic|motivational|charismatic}, `lang` {ru|en}; –≤—ã—Ö–æ–¥ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É—Ä—Å–∞ (–º–æ–¥—É–ª–∏/—É—Ä–æ–∫–∏), –∑–∞–ø–∏—Å—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ vault. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∫–ª–∞—Å—Å + –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è LLM/–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏.
- [ ] **W1:** –ú–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ mind-map (libs/storage/markmap.py) ‚Üí `90_Artifacts/Course_Mindmap.md` (fenced-–∫–æ–¥ –¥–ª—è markmap). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏–∑ outline.
- [ ] **W1:** –ü–∞–∫–µ—Ç–∏—Ä–æ–≤—â–∏–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (libs/storage/export_kit.py) ‚Äî —Å–±–æ—Ä `Course_Outlines.md`, `Checklists.md`, `Workbook.md`, `Quiz_Bank.md`, `Content_Calendar_14d.md` –∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ `90_Artifacts/`. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ZIP-—ç–∫—Å–ø–æ—Ä—Ç.

## 2) –î–∞–Ω–Ω—ã–µ –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- [x] Vault –Ω–∞ –§–° –¥–ª—è Markdown. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: libs/storage/notes_storage.py (YAML-—Ñ—Ä–æ–Ω—Ç–º–∞—Ç—Ç–µ—Ä, –∫—Ä–æ—Å—Å-—Å—Å—ã–ª–∫–∏, ZIP).
- [x] –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–æ–≤–µ–¥–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: init_db() –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏/–∏–Ω–¥–µ–∫—Å—ã (libs/db/database.py).
- [x] –¢–∞–±–ª–∏—Ü—ã users/notes/chunks. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–º. –º–æ–¥–µ–ª–∏ –≤ libs/db/models.py.
- [ ] –ö–æ–ª–ª–µ–∫—Ü–∏—è notes_meta –≤ Milvus. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è/–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
- [ ] **W1:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ vault –¥–ª—è –∫—É—Ä—Å–∞: —Å–æ–∑–¥–∞—Ç—å/–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ª–∏—á–∏–µ `00_Overview.md`, –∫–∞—Ç–∞–ª–æ–≥–∞ `01_Modules/*`, –∫–∞—Ç–∞–ª–æ–≥–∞ `90_Artifacts/*`, —Ñ–∞–π–ª–∞ `99_Metadata/project.json`. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Ä–∞—Å—à–∏—Ä–∏—Ç—å NotesStorage (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏).
- [ ] **W1:** –ò–Ω–¥–µ–∫—Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ `90_Artifacts/Sources_Index.md` (–∞–≥—Ä–µ–≥–∞—Ü–∏—è `source_url`, `author`, `dt`, `channel` –∏–∑ `notes`). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –º–æ–¥–µ–ª–∏ notes.
- [ ] **W1:** –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª—å `users` JSON-–ø–æ–ª–µ–º `prefs` (target_level/tone/lang); init_db –¥–æ–±–∞–≤–∏—Ç –∫–æ–ª–æ–Ω–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

## 3) LLM –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (Replicate)
- [x] –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Å–∞–π—Ç–æ–≤ (gpt-5-structured). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: generate_structured_notes().
- [x] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–µ–º–∞–º. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: group_topics() + –∑–∞–ø–∏—Å—å topic_id –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.
- [x] –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∑–∞–º–µ—Ç–∫–∏ Markdown. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: render_note_markdown() (–≤–∫–ª—é—á–∞—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ ¬´–°–º. —Ç–∞–∫–∂–µ¬ª).
- [x] –ê–≤—Ç–æ—Å—Å—ã–ª–∫–∏/¬´–°–º. —Ç–∞–∫–∂–µ¬ª. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: LLM –¥–∞—ë—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤; –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ NotesStorage –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –ø–æ —Ç—ç–≥–∞–º.
- [x] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è MOC. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: generate_moc() ‚Üí 00_MOC/topics_index.md.
- [x] –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ Replicate. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: libs/llm/embeddings_provider.py (–±–∞—Ç—á–∏/–∫—ç—à/–≤–∞–ª–∏–¥–∞—Ü–∏—è dim).
- [x] VectorIndex (Milvus). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ensure schema, upsert_chunks() –∏ search().
- [ ] **W1:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `generate_course_outline()` (–º–æ–¥—É–ª–∏/—É—Ä–æ–∫–∏) –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ—é—â–∏—Ö—Å—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤/`group_topics()` + —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤: 3‚Äì8 –º–æ–¥—É–ª–µ–π, –≤ –∫–∞–∂–¥–æ–º 3‚Äì6 —É—Ä–æ–∫–æ–≤. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Ç–æ–∫–µ–Ω-–ª–∏–º–∏—Ç, –¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º.
- [ ] **W1:** `generate_learning_outcomes(module)` (3‚Äì5 outcomes) –∏ `extract_keywords(module)` (–∫–ª—é—á–µ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã) —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Ç–æ–ª—å–∫–æ –∏–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
- [ ] **W1:** –°–ª–æ–π —Å—Ç–∏–ª—è —Ç–µ–∫—Å—Ç–∞ (`tone`, `target_level`, `lang`) ‚Äî –ø–æ—Å—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –Ω–∞–∑–≤–∞–Ω–∏–π –∏ –æ–ø–∏—Å–∞–Ω–∏–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤.
- [ ] **W1:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ LLM-–≤—ã–∑–æ–≤–æ–≤ (libs/llm/cache.py) —Å –∫–ª—é—á–æ–º {prompt-hash, model, params}. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç.

## 4) API –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- [x] POST /ingest/text. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–æ–∑–¥–∞—ë—Ç –∑–∞–º–µ—Ç–∫–∏, –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —á–∞–Ω–∫–∏, 201 —Å –¥–∞–Ω–Ω—ã–º–∏.
- [ ] POST /ingest/video. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ (501 Not Implemented).
- [ ] POST /ingest/image. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ (501 Not Implemented).
- [x] POST /search. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: RAG-–ø–æ–∏—Å–∫, answer_md + items.
- [x] GET /notes, GET /notes/{id}. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–ø–∏—Å–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–º–µ—Ç–æ–∫ –∏–∑ vault.
- [x] GET /export/zip. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–≥–æ vault.
- [x] GET /health. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: health-–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ API.
- [x] POST /telegram/webhook/{secret}. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –≤–∞–ª–∏–¥–∞—Ü–∏—è TELEGRAM_WEBHOOK_SECRET, —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
- [ ] **W1:** POST `/ops/build_course` (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ —Å `X-Bot-Api-Token`): –≤—Ö–æ–¥ `{note_ids?: string[], target_level, tone, lang}`; –≤—ã—Ö–æ–¥ ‚Äî JSON —Å –∫—Ä–∞—Ç–∫–∏–º outline –∏ –ø—É—Ç—è–º–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –≤—ã–∑—ã–≤–∞–µ—Ç `build_course`.
- [ ] **W1:** GET `/export/kit` ‚Äî —Å–∫–∞—á–∞—Ç—å ZIP —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ –∫—É—Ä—Å–∞ (`90_Artifacts/*` + `00_Overview.md`). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ZIP-–º–µ—Ö–∞–Ω–∏–∑–º.
- [ ] **W1:** –†–∞—Å—à–∏—Ä–∏—Ç—å /ingest/text: –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω `source_url`, –∏–∑–≤–ª–µ—á—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å–µ—Ä–≤–µ—Ä-—Å–∞–π–¥ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ–µ—Ç—á–µ—Ä) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—è `source_url`, `author`, `dt`, `channel`. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –¥–æ–ø. —Å–ª–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏.

## 5) Telegram Bot
- [x] /start, /mode (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: RU/EN —Å–æ–æ–±—â–µ–Ω–∏—è, inline-–∫–Ω–æ–ø–∫–∞ ¬´Process now¬ª.
- [x] –†–µ–∂–∏–º Curate: –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è 60s, –¥–µ–¥—É–ø –ø–æ —Ö–µ—à—É. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–±–æ—Ä –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ API.
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫/–æ—Ç–≤–µ—Ç–æ–≤ API. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Ä–∞–∑–ª–∏—á–µ–Ω–∏–µ 4xx/5xx, developer info.
- [x] –°—Å—ã–ª–∫–∏ –Ω–∞ Mini App –∏ ZIP. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å—Ç—Ä–æ—è—Ç—Å—è –∏–∑ PUBLIC_URL.
- [ ] **W1:** –ö–æ–º–∞–Ω–¥–∞ `/add` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–ª–∏ URL –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `POST /ingest/text` (–ø–æ–ª—è: `text?`, `source_url?`, `channel='telegram'`). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è/–æ—Ç–≤–µ—Ç–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã.
- [ ] **W1:** –ö–æ–º–∞–Ω–¥–∞ `/list` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –∑–∞–º–µ—Ç–æ–∫ (–∑–∞–≥–æ–ª–æ–≤–∫–∏/–¥–∞—Ç—ã) —á–µ—Ä–µ–∑ `GET /notes`. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ø–∞–≥–∏–Ω–∞—Ü–∏—è.
- [ ] **W1:** –ö–æ–º–∞–Ω–¥–∞ `/reset` ‚Äî –æ—á–∏—â–∞–µ—Ç –±—É—Ñ–µ—Ä —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ Curate (–Ω–µ —É–¥–∞–ª—è–µ—Ç –ë–î). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.
- [ ] **W1:** –ö–æ–º–∞–Ω–¥–∞ `/build_course` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç `POST /ops/build_course`, –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ—Ç–≤–µ—á–∞–µ—Ç —Å–≤–æ–¥–∫–æ–π (–∫–æ–ª-–≤–æ –º–æ–¥—É–ª–µ–π/—É—Ä–æ–∫–æ–≤) –∏ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∞–º–∏: ¬´üì¶ –°–∫–∞—á–∞—Ç—å KIT¬ª (GET /export/kit), ¬´üîé –û—Ç–∫—Ä—ã—Ç—å –≤ Mini App¬ª. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫/—Ç–∞–π–º–∞—É—Ç.
- [ ] **W1:** –ö–æ–º–∞–Ω–¥–∞ `/settings` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `target_level`, `tone`, `lang` (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `users.prefs`). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π.

## 6) Mini App (Next.js)
- [x] –°—Ç—Ä–∞–Ω–∏—Ü—ã /, /search, /notes/[id]. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–ø–∏—Å–æ–∫, –ø—Ä–æ—Å–º–æ—Ç—Ä, –ø–æ–∏—Å–∫, ReactMarkdown.
- [x] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: X-Telegram-Init-Data. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç—Å—è –∏–∑ Telegram WebApp (apps/miniapp/lib/telegram.ts, lib/api.ts).
- [x] –ë–∞–Ω–¥–ª –∏ —Ä–∞–Ω—Ç–∞–π–º. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: Dockerfile, –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è PUBLIC_URL —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –±–∏–ª–¥–µ.
- [~] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è RU/EN. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –±–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ UI ‚Äî EN; –±–æ—Ç ‚Äî RU/EN; –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π i18n –Ω–µ—Ç.
- [ ] **W1:** –ö–Ω–æ–ø–∫–∞/—Å—Å—ã–ª–∫–∞ ¬´üì¶ Download Course Kit¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–º–µ—Ç–æ–∫/—Å–ø–∏—Å–∫–∞ ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ `GET /export/kit`. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —É—á–∏—Ç—ã–≤–∞—Ç—å PUBLIC_URL.
- [ ] **W1:** –ü—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/artifacts` (—Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏–∑ `90_Artifacts/*`, —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ø—Ä–æ—Å—Ç–∞—è read-only.

## 7) –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ initData (HMAC) –¥–ª—è Mini App. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: current_user() –≤ apps/api/main.py.
- [x] –°–µ—Ä–≤–∏—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –ø–æ X-Bot-Api-Token. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É/—Å–∫—Ä–∏–ø—Ç–∞–º –≤—ã–∑—ã–≤–∞—Ç—å API –±–µ–∑ initData.
- [ ] –ö–≤–æ—Ç—ã/–ª–∏–º–∏—Ç—ã. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã; –ø—Ä–∏ —Ä–æ—Å—Ç–µ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å rate-limit/–∫–≤–æ—Ç—ã –≤ –ë–î.
- [ ] **W1:** –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å `/ops/build_course` –ø–æ `X-Bot-Api-Token` + –ø—Ä–∏–≤—è–∑–∫–∞ –∫ `user_id` –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞/—Ç–µ–ª–∞. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: 403 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞/–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏.

## 8) CI/CD –∏ –¥–µ–ø–ª–æ–π
- [x] CI: pytest + lint Mini App. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: job test –≤ .github/workflows/cicd.yml.
- [x] CD: —Å–±–æ—Ä–∫–∞/–ø—É—à –æ–±—Ä–∞–∑–æ–≤ –≤ GHCR. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: job build-and-push –¥–ª—è api, bot, miniapp.
- [x] Deploy: SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ deploy.sh. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: job deploy (–≤–µ—Ç–∫–∞ main).
- [x] Compose –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –æ–±—Ä–∞–∑–∞–º–∏ GHCR. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: docker-compose.yml (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ GHCR_NAMESPACE, IMAGE_TAG).
- [x] Nginx + TLS (certbot). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –∫–æ–Ω—Ñ–∏–≥–∏ –≤ infra/docker/nginx, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è SSL_CERTIFICATE.md.
- [ ] **W1:** –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–∑—ã API/–±–æ—Ç–∞: –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç-—ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏ (—Å–º. –Ω–∏–∂–µ), –ø—Ä–æ–∫–∏–Ω—É—Ç—å –Ω–æ–≤—ã–µ env –ø—Ä–∏ –±–∏–ª–¥–µ. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: lock-—Ñ–∞–π–ª—ã/–∫—ç—à.
- [ ] **W1:** –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã/–ª–∏–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π (`build_course`, `export_kit`, bot-–∫–æ–º–∞–Ω–¥—ã).

## 9) –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å
- [x] –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: libs/logging.py (—Ñ–æ—Ä–º–∞—Ç –≤ —Å—Ç–∏–ª–µ Milvus).
- [ ] –ú–µ—Ç—Ä–∏–∫–∏/—Ç—Ä–µ–π—Å–∏–Ω–≥. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç; –∫–∞–Ω–¥–∏–¥–∞—Ç—ã ‚Äî Prometheus/OpenTelemetry.
- [ ] **W1:** –¢–∞–π–º–∏–Ω–≥–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞: –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å `ingest_total_ms`, `build_course_total_ms`, —Å—á—ë—Ç—á–∏–∫ LLM-–≤—ã–∑–æ–≤–æ–≤/—Ç–æ–∫–µ–Ω–æ–≤. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –µ–¥–∏–Ω—ã–π –∫–æ—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π `request_id`.

## 10) –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] Unit/Integration —Ç–µ—Å—Ç—ã (pytest). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å—Ç–∞–±/mock –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Milvus/Replicate/Telegram) –≤ tests/.
- [ ] E2E (–±–æ—Ç + Mini App). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –Ω–µ –ø–æ–∫—Ä—ã—Ç–æ.
- [ ] **W1:** Unit-—Ç–µ—Å—Ç—ã –Ω–∞ `generate_course_outline`, `generate_learning_outcomes`, `markmap` (mock LLM).
- [ ] **W1:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã: `POST /ops/build_course` ‚Üí –∑–∞–ø–∏—Å—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤; `GET /export/kit` ‚Üí –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ZIP.
- [ ] **W1:** –¢–µ—Å—Ç—ã –±–æ—Ç–∞: `/add` (—Ç–µ–∫—Å—Ç/URL), `/build_course`, `/settings` ‚Äî –º–æ–∫ API.

## 11) –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] README —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –æ–±–Ω–æ–≤–ª—ë–Ω, –≤–∫–ª—é—á–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É, API, CI/CD.
- [x] DEPLOYMENT.md, SSL_CERTIFICATE.md. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –¥–µ—Ç–∞–ª–∏–∑–∏—Ä—É—é—Ç –¥–µ–ø–ª–æ–π –∏ –≤—ã–ø—É—Å–∫ TLS.
- [ ] **W1:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å JSON-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã `/ops/build_course`, —Å—Ç—Ä—É–∫—Ç—É—Ä—É `90_Artifacts/*`, –∫–ª—é—á–∏ `users.prefs` –≤ README + inline docstring.

## 12) –ë—É–¥—É—â–µ–µ –∏ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ
- [ ] /ingest/video, /ingest/image (OCR/ASR —á–µ—Ä–µ–∑ Replicate/OpenAI). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –µ—Å—Ç—å (501), –Ω—É–∂–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.
- [ ] –í—ã–Ω–æ—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤ worker/–æ—á–µ—Ä–µ–¥—å. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API.
- [ ] –•—Ä–∞–Ω–µ–Ω–∏–µ vault –≤ S3/–æ–±–ª–∞–∫–µ (–∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Mini App (—Ç–µ–º—ã/MOC, —Ñ–∏–ª—å—Ç—Ä—ã, i18n). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: UI —É–ª—É—á—à–µ–Ω–∏—è.

---

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º (W1)
- [ ] **API:** –¥–æ–±–∞–≤–∏—Ç—å `youtube_transcript_api`, `trafilatura` –¥–ª—è `source_url`-–∏–Ω–≥–µ—Å—Ç–∞ (–≤ Dockerfile/requirements). –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —Ñ–∏—á–∏ ‚Äî YT-—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü.
- [ ] **–ë–æ—Ç:** –ø—Ä–∏—ë–º URL, –Ω–æ –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–µ–ª–∞–µ–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ API —á–µ—Ä–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π `/ingest/text`.

### –ê–°–ê (Acceptance / DoD) –¥–ª—è W1
- [ ] `/add` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏ URL, –∑–∞–º–µ—Ç–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ `source_url/author/dt/channel`.
- [ ] `/build_course` —Å–æ–∑–¥–∞—ë—Ç outline (‚â•3 –º–æ–¥—É–ª—è, ‚â•3 —É—Ä–æ–∫–∞/–º–æ–¥—É–ª—å) –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ `90_Artifacts/*`.
- [ ] `/export/kit` –æ—Ç–¥–∞—ë—Ç –≤–∞–ª–∏–¥–Ω—ã–π ZIP —Å–æ –≤—Å–µ–º–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ + `00_Overview.md`.
- [ ] Markmap —Ñ–∞–π–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, —Å—Å—ã–ª–∫–∏ –≤–Ω—É—Ç—Ä–∏ vault —Ä–∞–±–æ—á–∏–µ.
- [ ] –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–∞–π–º–∏–Ω–≥–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ –∏ —Å—á—ë—Ç—á–∏–∫–∏ LLM-–≤—ã–∑–æ–≤–æ–≤.
